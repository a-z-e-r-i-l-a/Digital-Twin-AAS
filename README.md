# BaSyx AAS Setup

A containerized [Eclipse BaSyx](https://eclipse.dev/basyx/) setup for managing Asset Administration Shells (AAS).

## Prerequisites

- [Docker](https://docs.docker.com/get-docker/) and Docker Compose installed

## Quick Start

Clone the repository and run the startup script. It auto-detects the machine's network IP, writes it to a `.env` file, and starts all services.

**Linux / macOS:**

```bash
chmod +x start.sh
./start.sh
```

**Windows (PowerShell):**

```powershell
./start.ps1
```

That's it. The script will print the Web UI URL when ready.

## Manual Start

If you prefer to configure the IP yourself:

1. Copy the example environment file and set `HOST_IP` to this machine's network IP:

```bash
cp .env.example .env
# Edit .env and set HOST_IP=<your-ip>
```

2. Start the services:

```bash
docker compose up -d
```

> If you only need local access (same machine), you can skip the `.env` file entirely — all URLs default to `localhost`.

## Services

| Service | Port | Description |
|---|---|---|
| AAS Web UI | [http://HOST_IP:3000](http://localhost:3000) | Browser-based management interface |
| AAS Environment | [http://HOST_IP:8081](http://localhost:8081) | AAS and submodel repository |
| AAS Registry | [http://HOST_IP:8082](http://localhost:8082) | AAS descriptor registry |
| Submodel Registry | [http://HOST_IP:8083](http://localhost:8083) | Submodel descriptor registry |
| AAS Discovery | [http://HOST_IP:8084](http://localhost:8084) | Discovery / lookup service |
| Dashboard API | [http://HOST_IP:8085](http://localhost:8085) | Dashboard backend API |
| MQTT Broker | HOST_IP:1883 | Mosquitto message broker |
| MongoDB | 27017 (internal) | Database backend |

## Loading Asset Administration Shells

Place `.aasx` files in the `aas/` folder **before** starting the services, or upload them through the AAS Web UI at any time.

## Stopping the Services

```bash
docker compose down
```

To also remove all persisted data (MongoDB volumes):

```bash
docker compose down -v
```

## Project Structure

```
.
├── docker-compose.yml          # Service orchestration
├── .env                        # Machine-specific HOST_IP (auto-generated by start script)
├── .env.example                # Template for .env
├── start.sh                    # Startup script for Linux / macOS
├── start.ps1                   # Startup script for Windows
├── basyx/
│   ├── aas-env.properties      # AAS Environment configuration
│   ├── aas-registry.yml        # AAS Registry configuration
│   ├── sm-registry.yml         # Submodel Registry configuration
│   ├── aas-discovery.properties# AAS Discovery configuration
│   └── aas-dashboard.yml       # Dashboard API configuration
├── mosquitto/
│   └── config/
│       └── mosquitto.conf      # MQTT broker configuration
├── aas/                        # Place .aasx files here for auto-loading
└── logo/                       # Custom logo for the Web UI
```
