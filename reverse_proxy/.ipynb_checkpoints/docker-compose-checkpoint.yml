services:
  # The Reverse Proxy
  reverse-proxy:
    image: nginx:alpine
    container_name: reverse-proxy
    ports:
      - "80:80" # This will be the main entry point for remote users
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    networks:
      - default
      - original_network

  # A SECOND UI container, configured for remote access
  aas-ui-remote:
    image: eclipsebasyx/aas-gui:SNAPSHOT
    container_name: aas-ui-remote
    environment:
      # We use RELATIVE paths here. The browser will ask Nginx for these paths,
      # and Nginx will route them to the correct backend containers.
      AAS_REGISTRY_PATH: /registry/shell-descriptors
      SUBMODEL_REGISTRY_PATH: /sm-registry/submodel-descriptors
      AAS_REPO_PATH: /aas-env/shells
      SUBMODEL_REPO_PATH: /aas-env/submodels
      CD_REPO_PATH: /aas-env/concept-descriptions
      DASHBOARD_SERVICE_PATH: /dashboard-api/api/elements
      PRIMARY_COLOR: '#1C39BB'
      # LOGO_PATH: WvSC_BildMarke_sRGB.png (Optional: Mount volume if needed)
    networks:
      - default

networks:
  original_network:
    external: true
    name: aas_default  # <--- REPLACE THIS with your actual network name from Step 1