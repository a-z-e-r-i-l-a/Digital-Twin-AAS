events { }

http {
    server {
        listen 80;

        # 1. Serve the NEW Remote-Ready UI
        location / {
            proxy_pass http://aas-ui-remote:3000;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }

        # 2. Proxy for AAS Registry
        # Incoming: /registry/shell-descriptors -> Target: aas-registry:8080/shell-descriptors
        location /registry/ {
            proxy_pass http://aas-registry:8080/;
        }

        # 3. Proxy for Submodel Registry
        location /sm-registry/ {
            proxy_pass http://sm-registry:8080/;
        }

        # 4. Proxy for AAS Environment (Repo)
        location /aas-env/ {
            proxy_pass http://aas-env:8081/;
        }

        # 5. Proxy for Dashboard API
        location /dashboard-api/ {
            proxy_pass http://dashboard-api:8085/;
        }
    }
}